import{u as rt,a as ie,j as e,C as yt,P as _e,B as a,b as ue,G as u,c as ft,T as s,N as bt,d as le,E as vt,e as St,f as Dt,S as wt,g as X,h as B,i as Tt,k as re,l as H,m as st,n as se,o as Ct,F as Mt,p as Et,_ as It,q as At,r as it,L as xe,A as Pe,s as Y,I as V,t as G,M as b,v as R,w as at,x as ot,y as Ft,z as ct,D as lt,H as Wt,J as _t,K as Lt,O as ke,Q as T,R as Pt,U as $,V as dt,W as Ot,X as ht,Y as xt,Z as ut,$ as F,a0 as Bt,a1 as mt,a2 as Z,a3 as kt,a4 as zt,a5 as ze,a6 as Ne,a7 as Re,a8 as He,a9 as Nt,aa as Rt,ab as Ht,ac as pt,ad as te,ae as $t,af as fe,ag as ne,ah as Yt,ai as Vt,aj as Gt,ak as Ut,al as qt,am as Jt,an as $e,ao as Ce,ap as Qt,aq as Kt,ar as Ye,as as Ve,at as Xt,au as Zt,av as de,aw as en}from"./mui-CNJF2yTc.js";import{c as tn,r as h,a as Oe}from"./vendor-DFrXMbSk.js";(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&t(d)}).observe(document,{childList:!0,subtree:!0});function j(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(n){if(n.ep)return;n.ep=!0;const r=j(n);fetch(n.href,r)}})();var Le={},Ge=tn;Le.createRoot=Ge.createRoot,Le.hydrateRoot=Ge.hydrateRoot;const nn=[{id:"estimate",title:"見積書作成",subtitle:"ウィザード形式で簡単作成",icon:vt,color:"#4CAF50",route:"/estimate",description:"造園工事の見積書を4ステップで簡単作成",features:["4ステップウィザード","リアルタイム金額計算","造園業界標準フォーマット","PDF出力・印刷","仕入額・掛け率・調整額対応"],isNew:!0},{id:"price-master",title:"単価マスター",subtitle:"植栽・外構・工事単価管理",icon:St,color:"#FF9800",route:"/price-master",description:"造園工事の単価データベース管理",features:["カテゴリ階層管理","検索・フィルター機能","インポート/エクスポート","価格変動履歴","業界標準単価連携"]},{id:"project-history",title:"案件履歴",subtitle:"プロジェクト・受注管理",icon:Dt,color:"#2196F3",route:"/project-history",description:"過去の案件・プロジェクト履歴を管理",features:["案件検索・フィルター","ステータス管理","顧客情報連携","売上分析","進捗管理"],count:24},{id:"settings",title:"設定",subtitle:"事業者情報・システム設定",icon:wt,color:"#9C27B0",route:"/settings",description:"事業者基本情報とシステム設定",features:["会社情報管理","ユーザー・権限管理","ロゴ・印章設定","システム設定","データバックアップ"]},{id:"process-management",title:"工程管理",subtitle:"工程表作成・進捗管理",icon:X,color:"#607D8B",route:"/process-management",description:"造園工事の工程表作成・進捗管理",features:["自動工程表生成","視覚的ガントチャート","工程テンプレート","進捗トラッキング","現場写真記録"],isNew:!0}],Ue=({onMenuSelect:c,currentUser:p={name:"山田太郎",role:"代表取締役",company:"緑風造園株式会社"}})=>{const j=rt(),t=ie(j.breakpoints.down("md")),n=ie("(max-width:375px)"),[r,d]=h.useState(null),x=o=>{o.comingSoon||(d(o.id),c(o.id,o.route))};return e.jsxs(yt,{maxWidth:"xl",sx:{py:t?2:4},children:[e.jsxs(_e,{elevation:2,sx:{background:`linear-gradient(135deg, ${j.palette.success.main} 0%, ${j.palette.success.dark} 100%)`,color:"white",p:t?2:4,mb:t?2:4,borderRadius:3,position:"relative",overflow:"hidden"},children:[e.jsx(a,{sx:{position:"absolute",top:-50,right:-50,width:200,height:200,opacity:.1,borderRadius:"50%",bgcolor:"white"}}),e.jsx(ue,{sx:{position:"absolute",top:20,right:20,fontSize:60,opacity:.2}}),e.jsxs(u,{container:!0,spacing:t?2:3,alignItems:"center",children:[e.jsxs(u,{item:!0,xs:12,md:8,children:[!t&&e.jsx(a,{sx:{mb:2},children:e.jsxs(ft,{separator:e.jsx(bt,{fontSize:"small",sx:{color:"white"}}),sx:{color:"white",mb:1},children:[e.jsx(s,{variant:"body2",sx:{color:"white",opacity:.8},children:"ホーム"}),e.jsx(s,{variant:"body2",sx:{color:"white"},children:"メインメニュー"})]})}),e.jsx(s,{variant:t?n?"h5":"h4":"h3",fontWeight:"bold",gutterBottom:!0,children:"Garden 造園業務管理システム"}),e.jsxs(s,{variant:t?"body1":"h6",sx:{opacity:.9,mb:t?1:2},children:[p.company,t?"":` - ${p.name}様`]}),!n&&e.jsx(s,{variant:t?"body2":"body1",sx:{opacity:.8},children:"見積作成から工程管理まで、造園事業のすべてを一元管理"})]}),e.jsx(u,{item:!0,xs:12,md:4,sx:{textAlign:"center"},children:e.jsxs(a,{sx:{bgcolor:le("white",.2),borderRadius:2,p:2,backdropFilter:"blur(10px)"},children:[e.jsx(s,{variant:"body2",sx:{opacity:.8},children:"今日の予定"}),e.jsx(s,{variant:"h4",fontWeight:"bold",children:"3"}),e.jsx(s,{variant:"body2",sx:{opacity:.8},children:"件の案件"})]})})]})]}),e.jsx(u,{container:!0,spacing:t?2:3,children:nn.map(o=>e.jsx(u,{item:!0,xs:12,sm:6,lg:t?12:4,children:e.jsx(B,{elevation:r===o.id?8:2,sx:{height:t?"auto":"100%",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:r===o.id?"translateY(-4px)":"none",border:r===o.id?`2px solid ${o.color}`:"none","&:hover":{elevation:6,transform:t?"none":"translateY(-2px)","& .menu-icon":{transform:t?"none":"scale(1.1)",color:o.color}},opacity:o.comingSoon?.6:1,cursor:o.comingSoon?"not-allowed":"pointer"},children:e.jsx(Tt,{onClick:()=>x(o),disabled:o.comingSoon,sx:{height:"100%",p:0},children:e.jsxs(re,{sx:{p:t?2:3,height:"100%",display:"flex",flexDirection:t?"row":"column",alignItems:t?"center":"stretch"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:t?"center":"flex-start",mb:t?0:2,width:"100%"},children:[e.jsx(a,{sx:{p:t?1:1.5,borderRadius:2,bgcolor:le(o.color,.1),mr:2,minWidth:"fit-content"},children:e.jsx(o.icon,{className:"menu-icon",sx:{fontSize:t?28:32,color:o.color,transition:"all 0.3s ease"}})}),e.jsxs(a,{sx:{flex:1},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:t?0:.5,flexWrap:"wrap"},children:[e.jsx(s,{variant:t?"body1":"h6",fontWeight:"bold",sx:{mr:1},children:o.title}),o.isNew&&e.jsx(H,{label:"NEW",size:"small",color:"error",sx:{fontSize:"0.7rem",height:20}}),o.comingSoon&&e.jsx(H,{label:"準備中",size:"small",color:"default",sx:{fontSize:"0.7rem",height:20}}),o.count&&e.jsx(st,{badgeContent:o.count,color:"primary",sx:{ml:1},children:e.jsx(a,{})})]}),!t&&e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:1},children:o.subtitle})]})]}),!t&&e.jsxs(e.Fragment,{children:[e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:2,flex:1},children:o.description}),e.jsxs(a,{children:[e.jsx(s,{variant:"caption",color:"text.secondary",fontWeight:"medium",sx:{mb:1,display:"block"},children:"主要機能:"}),e.jsxs(a,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:[o.features.slice(0,3).map((v,g)=>e.jsx(H,{label:v,size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:24,borderColor:le(o.color,.3),color:o.color}},g)),o.features.length>3&&e.jsx(se,{title:e.jsx(a,{children:o.features.slice(3).map((v,g)=>e.jsxs(s,{variant:"caption",display:"block",children:["• ",v]},g))}),children:e.jsx(H,{label:`+${o.features.length-3}`,size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:24,borderColor:le(j.palette.text.secondary,.3)}})})]})]})]})]})})})},o.id))}),!t&&e.jsx(_e,{elevation:1,sx:{mt:4,p:3,bgcolor:le(j.palette.primary.main,.02),borderRadius:2},children:e.jsxs(u,{container:!0,spacing:3,children:[e.jsxs(u,{item:!0,xs:12,md:4,children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Ct,{sx:{mr:1,color:"primary.main"}}),e.jsx(s,{variant:"body2",fontWeight:"medium",children:"今月の見積作成"})]}),e.jsx(s,{variant:"h4",color:"primary.main",fontWeight:"bold",children:"12件"})]}),e.jsxs(u,{item:!0,xs:12,md:4,children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Mt,{sx:{mr:1,color:"success.main"}}),e.jsx(s,{variant:"body2",fontWeight:"medium",children:"進行中の案件"})]}),e.jsx(s,{variant:"h4",color:"success.main",fontWeight:"bold",children:"8件"})]}),e.jsxs(u,{item:!0,xs:12,md:4,children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Et,{sx:{mr:1,color:"warning.main"}}),e.jsx(s,{variant:"body2",fontWeight:"medium",children:"今週の予定"})]}),e.jsx(s,{variant:"h4",color:"warning.main",fontWeight:"bold",children:"15件"})]})]})})]})},rn=["localeText"],qe=h.createContext(null),sn=function(p){var j;const{localeText:t}=p,n=It(p,rn),{utils:r,localeText:d}=(j=h.useContext(qe))!=null?j:{utils:void 0,localeText:void 0},x=At({props:n,name:"MuiLocalizationProvider"}),{children:o,dateAdapter:v,dateFormats:g,dateLibInstance:A,adapterLocale:M,localeText:S}=x,W=h.useMemo(()=>it({},S,d,t),[S,d,t]),D=h.useMemo(()=>{if(!v)return r||null;const C=new v({locale:M,formats:g,instance:A});if(!C.isMUIAdapter)throw new Error(["MUI: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/getting-started/#installation"].join(`
`));return C},[v,M,g,A,r]),P=h.useMemo(()=>D?{minDate:D.date("1900-01-01T00:00:00.000"),maxDate:D.date("2099-12-31T00:00:00.000")}:null,[D]),U=h.useMemo(()=>({utils:D,defaultDates:P,localeText:W}),[P,D,W]);return e.jsx(qe.Provider,{value:U,children:o})},Me={},an={},on={},cn={},ln={},Ee={},Je={},dn={},hn={},xn={},un={},mn={},pn={},gn={},jn={},yn={},fn={},Qe={},Ie={},Ae={},bn={},vn={},Sn={},Dn={},wn={},Tn={},Cn={},Mn={},En={},In={},Fe={},he={},An={},Fn={},Wn={},_n={},Ln={},Pn={},On={},Bn={},kn={},zn={},Nn={},Rn={},Hn={},$n={},Ke={},Xe={},Ze={},We={},ye={},Yn={},Vn={},Gn={},Un={},qn={},Jn={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},Qn={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",fullDateWithWeekday:"PPPP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",monthAndYear:"LLLL yyyy",monthAndDate:"MMMM d",fullTime:"p",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",fullDateTime:"PP p",fullDateTime12h:"PP hh:mm aa",fullDateTime24h:"PP HH:mm",keyboardDateTime:"P p",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class Kn{constructor(p){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib="date-fns",this.locale=void 0,this.formats=void 0,this.formatTokenMap=Jn,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=r=>typeof r>"u"?new Date:r===null?null:new Date(r),this.dateWithTimezone=r=>this.date(r),this.getTimezone=()=>"default",this.setTimezone=r=>r,this.toJsDate=r=>r,this.getCurrentLocaleCode=()=>{var r;return((r=this.locale)==null?void 0:r.code)||"en-US"},this.is12HourCycleInCurrentLocale=()=>this.locale?/a/.test(this.locale.formatLong.time({width:"short"})):!0,this.expandFormat=r=>{const d=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return r.match(d).map(x=>{const o=x[0];if(o==="p"||o==="P"){const v=this.longFormatters[o];return v(x,this.locale.formatLong)}return x}).join("")},this.getFormatHelperText=r=>this.expandFormat(r).replace(/(aaa|aa|a)/g,"(a|p)m").toLocaleLowerCase(),this.isNull=r=>r===null,this.formatNumber=r=>r,this.getMeridiemText=r=>r==="am"?"AM":"PM";const{locale:j,formats:t,longFormatters:n}=p;this.locale=j,this.formats=it({},Qn,t),this.longFormatters=n}}class Xn extends Kn{constructor({locale:p,formats:j}={}){if(typeof Me!="function")throw new Error(["MUI: The `date-fns` package v3.x is not compatible with this adapter.","Please, install v2.x of the package or use the `AdapterDateFnsV3` instead."].join(`
`));super({locale:p??Un,formats:j,longFormatters:qn}),this.parseISO=t=>Yn(t),this.toISO=t=>Vn(t,{format:"extended"}),this.parse=(t,n)=>t===""?null:On(t,n,new Date,{locale:this.locale}),this.isValid=t=>Pn(this.date(t)),this.format=(t,n)=>this.formatByString(t,this.formats[n]),this.formatByString=(t,n)=>bn(t,n,{locale:this.locale}),this.getDiff=(t,n,r)=>{switch(r){case"years":return dn(t,this.date(n));case"quarters":return hn(t,this.date(n));case"months":return xn(t,this.date(n));case"weeks":return un(t,this.date(n));case"days":return mn(t,this.date(n));case"hours":return pn(t,this.date(n));case"minutes":return gn(t,this.date(n));case"seconds":return jn(t,this.date(n));default:return yn(t,this.date(n))}},this.isEqual=(t,n)=>t===null&&n===null?!0:An(t,n),this.isSameYear=(t,n)=>Wn(t,n),this.isSameMonth=(t,n)=>_n(t,n),this.isSameDay=(t,n)=>Fn(t,n),this.isSameHour=(t,n)=>Ln(t,n),this.isAfter=(t,n)=>Fe(t,n),this.isAfterYear=(t,n)=>Fe(t,Ae(n)),this.isAfterDay=(t,n)=>Fe(t,Qe(n)),this.isBefore=(t,n)=>he(t,n),this.isBeforeYear=(t,n)=>he(t,ye(n)),this.isBeforeDay=(t,n)=>he(t,Ke(n)),this.isWithinRange=(t,[n,r])=>Gn(t,{start:n,end:r}),this.startOfYear=t=>ye(t),this.startOfMonth=t=>Xe(t),this.startOfWeek=t=>We(t,{locale:this.locale}),this.startOfDay=t=>Ke(t),this.endOfYear=t=>Ae(t),this.endOfMonth=t=>Ze(t),this.endOfWeek=t=>Ie(t,{locale:this.locale}),this.endOfDay=t=>Qe(t),this.addYears=(t,n)=>Je(t,n),this.addMonths=(t,n)=>Ee(t,n),this.addWeeks=(t,n)=>ln(t,n),this.addDays=(t,n)=>Me(t,n),this.addHours=(t,n)=>cn(t,n),this.addMinutes=(t,n)=>on(t,n),this.addSeconds=(t,n)=>an(t,n),this.getYear=t=>In(t),this.getMonth=t=>Tn(t),this.getDate=t=>vn(t),this.getHours=t=>Dn(t),this.getMinutes=t=>wn(t),this.getSeconds=t=>Cn(t),this.getMilliseconds=t=>Mn(t),this.setYear=(t,n)=>$n(t,n),this.setMonth=(t,n)=>Nn(t,n),this.setDate=(t,n)=>Bn(t,n),this.setHours=(t,n)=>kn(t,n),this.setMinutes=(t,n)=>zn(t,n),this.setSeconds=(t,n)=>Rn(t,n),this.setMilliseconds=(t,n)=>Hn(t,n),this.getDaysInMonth=t=>Sn(t),this.getNextMonth=t=>Ee(t,1),this.getPreviousMonth=t=>Ee(t,-1),this.getMonthArray=t=>{const r=[ye(t)];for(;r.length<12;){const d=r[r.length-1];r.push(this.getNextMonth(d))}return r},this.mergeDateAndTime=(t,n)=>this.setSeconds(this.setMinutes(this.setHours(t,this.getHours(n)),this.getMinutes(n)),this.getSeconds(n)),this.getWeekdays=()=>{const t=new Date;return fn({start:We(t,{locale:this.locale}),end:Ie(t,{locale:this.locale})}).map(n=>this.formatByString(n,"EEEEEE"))},this.getWeekArray=t=>{const n=We(Xe(t),{locale:this.locale}),r=Ie(Ze(t),{locale:this.locale});let d=0,x=n;const o=[];for(;he(x,r);){const v=Math.floor(d/7);o[v]=o[v]||[],o[v].push(x),x=Me(x,1),d+=1}return o},this.getWeekNumber=t=>En(t,{locale:this.locale}),this.getYearRange=(t,n)=>{const r=ye(t),d=Ae(n),x=[];let o=r;for(;he(o,d);)x.push(o),o=Je(o,1);return x}}}const et=[{id:"garden-basic",name:"基本造園工事",description:"一般的な庭園工事の標準工程",tasks:[{name:"現地調査・測量",duration:1,dependencies:[],category:"survey"},{name:"設計・プラン作成",duration:3,dependencies:[0],category:"design"},{name:"資材調達・発注",duration:2,dependencies:[1],category:"procurement"},{name:"既存撤去・整地",duration:2,dependencies:[2],category:"demolition"},{name:"基礎工事・排水",duration:3,dependencies:[3],category:"foundation"},{name:"植栽工事",duration:4,dependencies:[4],category:"planting"},{name:"外構・装飾工事",duration:3,dependencies:[4],category:"decoration"},{name:"仕上げ・清掃",duration:1,dependencies:[5,6],category:"finishing"},{name:"検査・引き渡し",duration:1,dependencies:[7],category:"delivery"}]},{id:"maintenance",name:"定期メンテナンス",description:"庭園の定期メンテナンス工程",tasks:[{name:"現状確認・診断",duration:.5,dependencies:[],category:"survey"},{name:"剪定・刈り込み",duration:1,dependencies:[0],category:"maintenance"},{name:"除草・施肥",duration:1,dependencies:[0],category:"maintenance"},{name:"設備点検・修理",duration:.5,dependencies:[0],category:"maintenance"},{name:"清掃・整理",duration:.5,dependencies:[1,2,3],category:"finishing"}]},{id:"large-project",name:"大規模造園プロジェクト",description:"公園・大型施設等の造園工事",tasks:[{name:"企画・基本設計",duration:7,dependencies:[],category:"design"},{name:"詳細設計・図面作成",duration:14,dependencies:[0],category:"design"},{name:"許可申請・承認",duration:14,dependencies:[1],category:"legal"},{name:"資材・重機調達",duration:7,dependencies:[2],category:"procurement"},{name:"仮設工事・安全対策",duration:3,dependencies:[3],category:"preparation"},{name:"土工・造成工事",duration:21,dependencies:[4],category:"foundation"},{name:"給排水・電気工事",duration:14,dependencies:[5],category:"infrastructure"},{name:"植栽・緑化工事",duration:28,dependencies:[6],category:"planting"},{name:"外構・景観工事",duration:21,dependencies:[6],category:"decoration"},{name:"最終仕上げ・検査",duration:7,dependencies:[7,8],category:"finishing"}]}],be={survey:"#2E7D32",design:"#1976D2",procurement:"#F57C00",demolition:"#D32F2F",foundation:"#8D6E63",planting:"#4CAF50",decoration:"#9C27B0",finishing:"#607D8B",delivery:"#689F38",maintenance:"#00ACC1",legal:"#5D4037",preparation:"#FF9800",infrastructure:"#3F51B5"},Zn=({selectedProject:c,onScheduleCreated:p,onScheduleUpdated:j})=>{const[t,n]=h.useState([]),[r,d]=h.useState((c==null?void 0:c.project_id)||null),[x,o]=h.useState(null),[v,g]=h.useState("garden-basic"),[A,M]=h.useState(null),[S,W]=h.useState(!1),[D,P]=h.useState(!1),[U,C]=h.useState(!1),[w,E]=h.useState(null);h.useEffect(()=>{(async()=>{try{C(!0);const m=await fetch("/api/projects");if(m.ok){const y=await m.json();n(y.projects||[])}}catch{E("プロジェクト一覧の取得に失敗しました")}finally{C(!1)}})()},[]),h.useEffect(()=>{r&&ae(r)},[r]);const ae=async i=>{try{C(!0);const m=await fetch(`/api/projects/${i}/schedule`);if(m.ok){const y=await m.json();o(y.schedule)}else m.status===404&&o(null)}catch{E("工程表の取得に失敗しました")}finally{C(!1)}},ee=h.useCallback(()=>{var oe;if(!r)return;const i=et.find(I=>I.id===v);if(!i)return;const m=t.find(I=>I.project_id===r);if(!m)return;const y=new Date,z=i.tasks.map((I,pe)=>{let q=new Date(y);if(I.dependencies.length>0){const ge=Math.max(...I.dependencies.map(N=>{const De=i.tasks[N],J=new Date(y);return J.setDate(J.getDate()+N),J.setDate(J.getDate()+De.duration),J.getTime()}));q=new Date(ge)}else q.setDate(q.getDate()+pe);const ce=new Date(q);return ce.setDate(ce.getDate()+I.duration),{id:pe+1,name:I.name,description:`${I.name}の作業`,start_date:q.toISOString().split("T")[0],end_date:ce.toISOString().split("T")[0],duration:I.duration,progress:0,category:I.category,dependencies:I.dependencies,assigned_to:"",status:"planned",priority:"medium"}}),_={id:Date.now(),project_id:r,name:`${m.name} - ${i.name}`,description:`${i.description}（自動生成）`,start_date:y.toISOString().split("T")[0],end_date:((oe=z[z.length-1])==null?void 0:oe.end_date)||y.toISOString().split("T")[0],tasks:z,template_id:i.id,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};o(_),P(!0)},[r,v,t]),ve=async()=>{if(!(!x||!r))try{C(!0);const i=await fetch(`/api/projects/${r}/schedule`,{method:x.id>1e6?"POST":"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(i.ok){const m=await i.json();o(m.schedule),P(!1),x.id>1e6?p==null||p(m.schedule):j==null||j(m.schedule)}}catch{E("工程表の保存に失敗しました")}finally{C(!1)}},Se=i=>{if(!x)return;const m=A?x.tasks.map(y=>y.id===i.id?i:y):[...x.tasks,{...i,id:Date.now()}];o({...x,tasks:m,updated_at:new Date().toISOString()}),W(!1),M(null)},me=i=>{if(!x)return;const m=x.tasks.filter(y=>y.id!==i);o({...x,tasks:m,updated_at:new Date().toISOString()})},k=h.useMemo(()=>{if(!x)return null;const i=x.tasks.map(_=>({..._,startDate:new Date(_.start_date),endDate:new Date(_.end_date),color:be[_.category]||"#757575"})),m=Math.min(...i.map(_=>_.startDate.getTime())),y=Math.max(...i.map(_=>_.endDate.getTime())),z=Math.ceil((y-m)/(1e3*60*60*24));return{tasks:i,minDate:new Date(m),maxDate:new Date(y),totalDays:z}},[x]);return U?e.jsxs(a,{sx:{width:"100%",p:3},children:[e.jsx(xe,{}),e.jsx(s,{sx:{mt:2},children:"読み込み中..."})]}):e.jsx(sn,{dateAdapter:Xn,children:e.jsxs(a,{sx:{p:3},children:[e.jsxs(a,{sx:{mb:3,display:"flex",alignItems:"center",gap:2},children:[e.jsx(X,{sx:{fontSize:32,color:"#4CAF50"}}),e.jsx(s,{variant:"h4",sx:{color:"#2E7D32",fontWeight:"bold"},children:"工程管理・工程表作成"})]}),w&&e.jsx(Pe,{severity:"error",sx:{mb:3},children:w}),e.jsx(B,{sx:{mb:3},children:e.jsxs(re,{children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ue,{sx:{color:"#4CAF50"}}),"案件選択"]}),e.jsxs(u,{container:!0,spacing:3,children:[e.jsx(u,{item:!0,xs:12,md:6,children:e.jsxs(Y,{fullWidth:!0,children:[e.jsx(V,{children:"工事案件を選択"}),e.jsx(G,{value:r||"",onChange:i=>d(Number(i.target.value)),label:"工事案件を選択",children:t.map(i=>e.jsx(b,{value:i.project_id,children:e.jsxs(a,{children:[e.jsx(s,{variant:"body1",children:i.name}),e.jsxs(s,{variant:"caption",color:"textSecondary",children:[i.customer_name," - ",i.status]})]})},i.project_id))})]})}),e.jsx(u,{item:!0,xs:12,md:6,children:e.jsxs(Y,{fullWidth:!0,children:[e.jsx(V,{children:"工程テンプレート"}),e.jsx(G,{value:v,onChange:i=>g(i.target.value),label:"工程テンプレート",children:et.map(i=>e.jsx(b,{value:i.id,children:e.jsxs(a,{children:[e.jsx(s,{variant:"body1",children:i.name}),e.jsx(s,{variant:"caption",color:"textSecondary",children:i.description})]})},i.id))})]})})]}),e.jsxs(a,{sx:{mt:2,display:"flex",gap:2},children:[e.jsx(R,{variant:"contained",startIcon:e.jsx(at,{}),onClick:ee,disabled:!r,sx:{bgcolor:"#4CAF50","&:hover":{bgcolor:"#388E3C"}},children:"自動工程表生成"}),e.jsx(R,{variant:"outlined",startIcon:e.jsx(ot,{}),onClick:()=>{M(null),W(!0)},disabled:!r,children:"工程追加"})]})]})}),x&&e.jsxs(e.Fragment,{children:[e.jsx(B,{sx:{mb:3},children:e.jsxs(re,{children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"between",alignItems:"center",mb:2},children:[e.jsxs(s,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ft,{sx:{color:"#4CAF50"}}),x.name]}),e.jsxs(a,{sx:{display:"flex",gap:1},children:[D&&e.jsx(H,{label:"未保存",color:"warning",size:"small"}),e.jsx(R,{variant:"contained",startIcon:e.jsx(ct,{}),onClick:ve,size:"small",sx:{bgcolor:"#4CAF50","&:hover":{bgcolor:"#388E3C"}},children:"保存"})]})]}),e.jsx(s,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:x.description}),e.jsxs(s,{variant:"body2",children:["期間: ",x.start_date," ～ ",x.end_date,"（全",x.tasks.length,"工程）"]})]})}),k&&e.jsx(B,{sx:{mb:3},children:e.jsxs(re,{children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(X,{sx:{color:"#4CAF50"}}),"視覚的工程表（ガントチャート）"]}),e.jsx(a,{sx:{overflowX:"auto",mt:2},children:e.jsxs(a,{sx:{minWidth:Math.max(800,k.totalDays*20),height:k.tasks.length*60+100,position:"relative"},children:[e.jsx(a,{sx:{position:"sticky",top:0,bgcolor:"background.paper",zIndex:1,borderBottom:1,borderColor:"divider",pb:1},children:e.jsxs(u,{container:!0,children:[e.jsx(u,{item:!0,xs:3,sx:{p:1},children:e.jsx(s,{variant:"body2",fontWeight:"bold",children:"工程名"})}),e.jsx(u,{item:!0,xs:9,children:e.jsx(a,{sx:{display:"flex",height:40},children:Array.from({length:k.totalDays},(i,m)=>{const y=new Date(k.minDate);return y.setDate(y.getDate()+m),e.jsx(a,{sx:{width:20,textAlign:"center",borderRight:1,borderColor:"divider",fontSize:"0.7rem",p:.5},children:y.getDate()},m)})})})]})}),k.tasks.map((i,m)=>{const y=Math.floor((i.startDate.getTime()-k.minDate.getTime())/864e5),z=Math.floor((i.endDate.getTime()-i.startDate.getTime())/(1e3*60*60*24))+1;return e.jsxs(a,{sx:{display:"flex",height:50,alignItems:"center",borderBottom:1,borderColor:"divider","&:hover":{bgcolor:"action.hover"}},children:[e.jsxs(a,{sx:{width:"25%",p:1},children:[e.jsx(s,{variant:"body2",noWrap:!0,children:i.name}),e.jsxs(s,{variant:"caption",color:"textSecondary",children:[i.duration,"日間"]})]}),e.jsx(a,{sx:{width:"75%",position:"relative",height:30},children:e.jsx(a,{sx:{position:"absolute",left:y*20,width:z*20,height:20,bgcolor:i.color,borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.7rem",opacity:i.status==="completed"?1:.8},children:i.progress>0&&`${i.progress}%`})})]},i.id)})]})})]})}),e.jsx(B,{children:e.jsxs(re,{children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(lt,{sx:{color:"#4CAF50"}}),"工程一覧"]}),e.jsx(Wt,{component:_e,variant:"outlined",children:e.jsxs(_t,{children:[e.jsx(Lt,{children:e.jsxs(ke,{children:[e.jsx(T,{children:"工程名"}),e.jsx(T,{children:"カテゴリ"}),e.jsx(T,{children:"開始日"}),e.jsx(T,{children:"終了日"}),e.jsx(T,{children:"期間"}),e.jsx(T,{children:"進捗"}),e.jsx(T,{children:"ステータス"}),e.jsx(T,{children:"担当者"}),e.jsx(T,{children:"操作"})]})}),e.jsx(Pt,{children:x.tasks.map(i=>e.jsxs(ke,{children:[e.jsxs(T,{children:[e.jsx(s,{variant:"body2",fontWeight:"medium",children:i.name}),i.description&&e.jsx(s,{variant:"caption",color:"textSecondary",children:i.description})]}),e.jsx(T,{children:e.jsx(H,{label:i.category,size:"small",sx:{bgcolor:be[i.category],color:"white",fontSize:"0.7rem"}})}),e.jsx(T,{children:i.start_date}),e.jsx(T,{children:i.end_date}),e.jsxs(T,{children:[i.duration,"日"]}),e.jsx(T,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(xe,{variant:"determinate",value:i.progress,sx:{width:60,height:6}}),e.jsxs(s,{variant:"caption",children:[i.progress,"%"]})]})}),e.jsx(T,{children:e.jsx(H,{label:i.status,size:"small",color:i.status==="completed"?"success":i.status==="in_progress"?"primary":i.status==="delayed"?"error":"default"})}),e.jsx(T,{children:i.assigned_to||"未割り当て"}),e.jsx(T,{children:e.jsxs(a,{sx:{display:"flex",gap:.5},children:[e.jsx(se,{title:"編集",children:e.jsx($,{size:"small",onClick:()=>{M(i),W(!0)},children:e.jsx(dt,{fontSize:"small"})})}),e.jsx(se,{title:"削除",children:e.jsx($,{size:"small",onClick:()=>me(i.id),color:"error",children:e.jsx(Ot,{fontSize:"small"})})})]})})]},i.id))})]})})]})})]}),e.jsxs(ht,{open:S,onClose:()=>W(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(xt,{children:A?"工程編集":"工程追加"}),e.jsx(ut,{children:e.jsx(er,{task:A,onSave:Se,onCancel:()=>W(!1)})})]})]})})},er=({task:c,onSave:p,onCancel:j})=>{const[t,n]=h.useState({name:(c==null?void 0:c.name)||"",description:(c==null?void 0:c.description)||"",start_date:(c==null?void 0:c.start_date)||new Date().toISOString().split("T")[0],end_date:(c==null?void 0:c.end_date)||new Date().toISOString().split("T")[0],duration:(c==null?void 0:c.duration)||1,progress:(c==null?void 0:c.progress)||0,category:(c==null?void 0:c.category)||"survey",assigned_to:(c==null?void 0:c.assigned_to)||"",status:(c==null?void 0:c.status)||"planned",priority:(c==null?void 0:c.priority)||"medium"}),r=()=>{const d={id:(c==null?void 0:c.id)||Date.now(),name:t.name,description:t.description,start_date:t.start_date,end_date:t.end_date,duration:t.duration,progress:t.progress,category:t.category,dependencies:(c==null?void 0:c.dependencies)||[],assigned_to:t.assigned_to,status:t.status,priority:t.priority};p(d)};return e.jsxs(a,{sx:{pt:2},children:[e.jsxs(u,{container:!0,spacing:3,children:[e.jsx(u,{item:!0,xs:12,children:e.jsx(F,{fullWidth:!0,label:"工程名",value:t.name,onChange:d=>n({...t,name:d.target.value}),required:!0})}),e.jsx(u,{item:!0,xs:12,children:e.jsx(F,{fullWidth:!0,label:"説明",multiline:!0,rows:2,value:t.description,onChange:d=>n({...t,description:d.target.value})})}),e.jsx(u,{item:!0,xs:6,children:e.jsx(F,{fullWidth:!0,label:"開始日",type:"date",value:t.start_date,onChange:d=>n({...t,start_date:d.target.value}),InputLabelProps:{shrink:!0}})}),e.jsx(u,{item:!0,xs:6,children:e.jsx(F,{fullWidth:!0,label:"終了日",type:"date",value:t.end_date,onChange:d=>n({...t,end_date:d.target.value}),InputLabelProps:{shrink:!0}})}),e.jsx(u,{item:!0,xs:6,children:e.jsx(F,{fullWidth:!0,label:"期間（日数）",type:"number",value:t.duration,onChange:d=>n({...t,duration:Number(d.target.value)}),inputProps:{min:.5,step:.5}})}),e.jsx(u,{item:!0,xs:6,children:e.jsx(F,{fullWidth:!0,label:"進捗（%）",type:"number",value:t.progress,onChange:d=>n({...t,progress:Number(d.target.value)}),inputProps:{min:0,max:100}})}),e.jsx(u,{item:!0,xs:6,children:e.jsxs(Y,{fullWidth:!0,children:[e.jsx(V,{children:"カテゴリ"}),e.jsx(G,{value:t.category,onChange:d=>n({...t,category:d.target.value}),label:"カテゴリ",children:Object.keys(be).map(d=>e.jsx(b,{value:d,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(a,{sx:{width:16,height:16,bgcolor:be[d],borderRadius:.5}}),d]})},d))})]})}),e.jsx(u,{item:!0,xs:6,children:e.jsx(F,{fullWidth:!0,label:"担当者",value:t.assigned_to,onChange:d=>n({...t,assigned_to:d.target.value})})}),e.jsx(u,{item:!0,xs:6,children:e.jsxs(Y,{fullWidth:!0,children:[e.jsx(V,{children:"ステータス"}),e.jsxs(G,{value:t.status,onChange:d=>n({...t,status:d.target.value}),label:"ステータス",children:[e.jsx(b,{value:"planned",children:"計画中"}),e.jsx(b,{value:"in_progress",children:"進行中"}),e.jsx(b,{value:"completed",children:"完了"}),e.jsx(b,{value:"delayed",children:"遅延"}),e.jsx(b,{value:"cancelled",children:"中止"})]})]})}),e.jsx(u,{item:!0,xs:6,children:e.jsxs(Y,{fullWidth:!0,children:[e.jsx(V,{children:"優先度"}),e.jsxs(G,{value:t.priority,onChange:d=>n({...t,priority:d.target.value}),label:"優先度",children:[e.jsx(b,{value:"low",children:"低"}),e.jsx(b,{value:"medium",children:"中"}),e.jsx(b,{value:"high",children:"高"}),e.jsx(b,{value:"critical",children:"緊急"})]})]})})]}),e.jsxs(a,{sx:{mt:3,display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(R,{onClick:j,children:"キャンセル"}),e.jsx(R,{variant:"contained",onClick:r,disabled:!t.name,sx:{bgcolor:"#4CAF50","&:hover":{bgcolor:"#388E3C"}},children:"保存"})]})]})},tr={survey:"#2E7D32",design:"#1976D2",procurement:"#F57C00",demolition:"#D32F2F",foundation:"#8D6E63",planting:"#4CAF50",decoration:"#9C27B0",finishing:"#607D8B",delivery:"#689F38",maintenance:"#00ACC1",legal:"#5D4037",preparation:"#FF9800",infrastructure:"#3F51B5"},tt=[{id:"garden-basic",name:"基本造園工事",description:"庭園工事(7-14日)",icon:"🌳",estimatedDays:14,tasks:[{name:"現地調査",duration:1,category:"survey"},{name:"設計作成",duration:3,category:"design"},{name:"資材調達",duration:2,category:"procurement"},{name:"既存撤去",duration:2,category:"demolition"},{name:"基礎工事",duration:3,category:"foundation"},{name:"植栽工事",duration:4,category:"planting"},{name:"外構工事",duration:3,category:"decoration"},{name:"仕上げ",duration:1,category:"finishing"}]},{id:"maintenance",name:"メンテナンス",description:"定期管理(1-3日)",icon:"✂️",estimatedDays:3,tasks:[{name:"状況確認",duration:.5,category:"survey"},{name:"剪定作業",duration:1,category:"maintenance"},{name:"除草・施肥",duration:1,category:"maintenance"},{name:"設備点検",duration:.5,category:"maintenance"}]},{id:"large-project",name:"大規模工事",description:"公園・施設(1-3ヶ月)",icon:"🏗️",estimatedDays:90,tasks:[{name:"企画設計",duration:14,category:"design"},{name:"許可申請",duration:14,category:"legal"},{name:"資材調達",duration:7,category:"procurement"},{name:"仮設工事",duration:3,category:"preparation"},{name:"造成工事",duration:21,category:"foundation"},{name:"植栽工事",duration:28,category:"planting"},{name:"外構工事",duration:21,category:"decoration"}]}],nr=({selectedProject:c,onScheduleCreated:p,onScheduleUpdated:j})=>{const t=rt(),n=ie(t.breakpoints.down("md")),r=ie("(max-width:375px)"),[d,x]=h.useState([]),[o,v]=h.useState((c==null?void 0:c.project_id)||null),[g,A]=h.useState(null),[M,S]=h.useState("garden-basic"),[W,D]=h.useState("list"),[P,U]=h.useState(!1),[C,w]=h.useState("all"),[E,ae]=h.useState("all"),[ee,ve]=h.useState(""),[Se,me]=h.useState(null),[k,i]=h.useState(!1),[m,y]=h.useState("project-select"),[z,_]=h.useState(!1),[oe,I]=h.useState(null),[pe,q]=h.useState(0);h.useEffect(()=>{x([{project_id:1,name:"田中様邸庭園リフォーム",customer_name:"田中太郎",status:"active",location:"東京都世田谷区"},{project_id:2,name:"山田マンション植栽工事",customer_name:"山田建設",status:"planning",location:"神奈川県横浜市"},{project_id:3,name:"○○公園メンテナンス",customer_name:"○○市役所",status:"in_progress",location:"埼玉県さいたま市"}])},[]);const ce=h.useCallback(()=>{var O;if(!o)return;const l=tt.find(L=>L.id===M);if(!l)return;const f=d.find(L=>L.project_id===o);if(!f)return;const Q=new Date,K=l.tasks.map((L,Be)=>{const je=new Date(Q);je.setDate(je.getDate()+Be);const Te=new Date(je);return Te.setDate(Te.getDate()+L.duration),{id:Be+1,name:L.name,description:`${L.name}の作業`,start_date:je.toISOString().split("T")[0],end_date:Te.toISOString().split("T")[0],duration:L.duration,progress:0,category:L.category,dependencies:[],assigned_to:"",status:"planned",priority:"medium"}}),we={id:Date.now(),project_id:o,name:`${f.name} - ${l.name}`,description:`${l.description}`,start_date:Q.toISOString().split("T")[0],end_date:((O=K[K.length-1])==null?void 0:O.end_date)||Q.toISOString().split("T")[0],tasks:K,template_id:l.id,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};A(we),y("schedule-view")},[o,M,d]),ge=h.useMemo(()=>g?g.tasks.filter(l=>{const f=C==="all"||l.status===C,Q=E==="all"||l.category===E,K=ee===""||l.name.toLowerCase().includes(ee.toLowerCase());return f&&Q&&K}):[],[g,C,E,ee]),N=h.useMemo(()=>{if(!g||g.tasks.length===0)return{completed:0,inProgress:0,planned:0,overall:0};const l=g.tasks,f=l.filter(O=>O.status==="completed").length,Q=l.filter(O=>O.status==="in_progress").length,K=l.filter(O=>O.status==="planned").length,we=Math.round(l.reduce((O,L)=>O+L.progress,0)/l.length);return{completed:f,inProgress:Q,planned:K,overall:we}},[g]),De=()=>e.jsx(B,{sx:{mb:2},children:e.jsxs(ze,{expanded:m==="project-select",onChange:()=>y(m==="project-select"?!1:"project-select"),children:[e.jsx(Ne,{expandIcon:e.jsx(Re,{}),children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ue,{sx:{color:"#4CAF50"}}),e.jsx(s,{variant:r?"body1":"h6",fontWeight:"bold",children:"案件選択"})]})}),e.jsx(He,{children:e.jsxs(u,{container:!0,spacing:2,children:[e.jsx(u,{item:!0,xs:12,children:e.jsxs(Y,{fullWidth:!0,size:"small",children:[e.jsx(V,{children:"工事案件を選択"}),e.jsx(G,{value:o||"",onChange:l=>v(Number(l.target.value)),label:"工事案件を選択",children:d.map(l=>e.jsx(b,{value:l.project_id,children:e.jsxs(a,{children:[e.jsx(s,{variant:"body2",children:l.name}),e.jsxs(s,{variant:"caption",color:"textSecondary",children:[l.customer_name," - ",l.location]})]})},l.project_id))})]})}),e.jsxs(u,{item:!0,xs:12,children:[e.jsx(s,{variant:"subtitle2",gutterBottom:!0,children:"工程テンプレート"}),e.jsx(u,{container:!0,spacing:1,children:tt.map(l=>e.jsx(u,{item:!0,xs:12,children:e.jsx(B,{sx:{p:1,cursor:"pointer",border:M===l.id?2:1,borderColor:M===l.id?"primary.main":"divider",bgcolor:M===l.id?"primary.50":"background.paper"},onClick:()=>S(l.id),children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(s,{sx:{fontSize:"1.2rem"},children:l.icon}),e.jsxs(a,{sx:{flex:1},children:[e.jsx(s,{variant:"body2",fontWeight:"medium",children:l.name}),e.jsx(s,{variant:"caption",color:"textSecondary",children:l.description})]})]})})},l.id))})]}),e.jsx(u,{item:!0,xs:12,children:e.jsx(R,{fullWidth:!0,variant:"contained",startIcon:e.jsx(at,{}),onClick:ce,disabled:!o,sx:{bgcolor:"#4CAF50","&:hover":{bgcolor:"#388E3C"},py:1.5},children:"工程表を自動生成"})})]})})]})}),J=()=>g?e.jsx(B,{sx:{mb:2},children:e.jsxs(ze,{expanded:m==="schedule-overview",onChange:()=>y(m==="schedule-overview"?!1:"schedule-overview"),children:[e.jsx(Ne,{expandIcon:e.jsx(Re,{}),children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(X,{sx:{color:"#4CAF50"}}),e.jsxs(a,{sx:{flex:1},children:[e.jsx(s,{variant:"body1",fontWeight:"bold",children:g.name}),e.jsxs(s,{variant:"caption",color:"textSecondary",children:["全体進捗: ",N.overall,"%"]})]}),e.jsx(gt,{value:N.overall,size:40})]})}),e.jsx(He,{children:e.jsxs(a,{children:[e.jsx(s,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:g.description}),e.jsxs(u,{container:!0,spacing:1,sx:{mb:2},children:[e.jsxs(u,{item:!0,xs:6,children:[e.jsx(s,{variant:"caption",color:"textSecondary",children:"開始日"}),e.jsx(s,{variant:"body2",children:g.start_date})]}),e.jsxs(u,{item:!0,xs:6,children:[e.jsx(s,{variant:"caption",color:"textSecondary",children:"完了予定"}),e.jsx(s,{variant:"body2",children:g.end_date})]})]}),e.jsxs(a,{sx:{mb:2},children:[e.jsx(s,{variant:"caption",color:"textSecondary",children:"進捗状況"}),e.jsx(xe,{variant:"determinate",value:N.overall,sx:{height:8,borderRadius:4,mb:1}})]}),e.jsxs(u,{container:!0,spacing:1,children:[e.jsx(u,{item:!0,xs:4,children:e.jsxs(a,{sx:{textAlign:"center"},children:[e.jsx(s,{variant:"h6",color:"success.main",children:N.completed}),e.jsx(s,{variant:"caption",children:"完了"})]})}),e.jsx(u,{item:!0,xs:4,children:e.jsxs(a,{sx:{textAlign:"center"},children:[e.jsx(s,{variant:"h6",color:"primary.main",children:N.inProgress}),e.jsx(s,{variant:"caption",children:"進行中"})]})}),e.jsx(u,{item:!0,xs:4,children:e.jsxs(a,{sx:{textAlign:"center"},children:[e.jsx(s,{variant:"h6",color:"text.secondary",children:N.planned}),e.jsx(s,{variant:"caption",children:"予定"})]})})]})]})})]})}):null,gt=({value:l,size:f=40})=>e.jsxs(a,{sx:{position:"relative",display:"inline-flex",width:f,height:f},children:[e.jsxs("svg",{width:f,height:f,children:[e.jsx("circle",{cx:f/2,cy:f/2,r:(f-4)/2,fill:"none",stroke:"#E0E0E0",strokeWidth:3}),e.jsx("circle",{cx:f/2,cy:f/2,r:(f-4)/2,fill:"none",stroke:"#4CAF50",strokeWidth:3,strokeDasharray:`${l/100*2*Math.PI*((f-4)/2)} ${2*Math.PI*((f-4)/2)}`,strokeDashoffset:0,transform:`rotate(-90 ${f/2} ${f/2})`})]}),e.jsx(a,{sx:{position:"absolute",top:0,left:0,bottom:0,right:0,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(s,{variant:"caption",fontWeight:"bold",children:[l,"%"]})})]}),jt=()=>e.jsx(B,{children:e.jsxs(re,{sx:{p:1},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1,mb:2,px:1},children:[e.jsx(lt,{sx:{color:"#4CAF50"}}),e.jsx(s,{variant:"subtitle1",fontWeight:"bold",sx:{flex:1},children:"工程一覧"}),e.jsx($,{size:"small",onClick:()=>U(!P),children:e.jsx(Nt,{})})]}),e.jsx(Rt,{in:P,children:e.jsxs(a,{sx:{mb:2,px:1},children:[e.jsxs(u,{container:!0,spacing:1,children:[e.jsx(u,{item:!0,xs:6,children:e.jsxs(Y,{fullWidth:!0,size:"small",children:[e.jsx(V,{children:"ステータス"}),e.jsxs(G,{value:C,onChange:l=>w(l.target.value),label:"ステータス",children:[e.jsx(b,{value:"all",children:"すべて"}),e.jsx(b,{value:"planned",children:"予定"}),e.jsx(b,{value:"in_progress",children:"進行中"}),e.jsx(b,{value:"completed",children:"完了"})]})]})}),e.jsx(u,{item:!0,xs:6,children:e.jsxs(Y,{fullWidth:!0,size:"small",children:[e.jsx(V,{children:"カテゴリ"}),e.jsxs(G,{value:E,onChange:l=>ae(l.target.value),label:"カテゴリ",children:[e.jsx(b,{value:"all",children:"すべて"}),e.jsx(b,{value:"survey",children:"調査"}),e.jsx(b,{value:"design",children:"設計"}),e.jsx(b,{value:"planting",children:"植栽"}),e.jsx(b,{value:"decoration",children:"外構"})]})]})})]}),e.jsx(F,{fullWidth:!0,size:"small",placeholder:"工程名で検索...",value:ee,onChange:l=>ve(l.target.value),InputProps:{startAdornment:e.jsx(Ht,{sx:{mr:1,color:"action.active"}})},sx:{mt:1}})]})}),e.jsx(pt,{sx:{p:0},children:ge.map((l,f)=>e.jsx(Oe.Fragment,{children:e.jsxs(te,{sx:{border:1,borderColor:"divider",borderRadius:1,mb:1,bgcolor:"background.paper"},children:[e.jsx($t,{children:e.jsx(fe,{sx:{bgcolor:tr[l.category]||"#757575",width:32,height:32},children:l.category==="planting"?"🌱":l.category==="design"?"📐":l.category==="survey"?"📏":"🔧"})}),e.jsx(ne,{primary:e.jsx(s,{variant:"body2",fontWeight:"medium",children:l.name}),secondary:e.jsxs(a,{children:[e.jsxs(s,{variant:"caption",color:"textSecondary",children:[l.start_date," - ",l.end_date," (",l.duration,"日)"]}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1,mt:.5},children:[e.jsx(xe,{variant:"determinate",value:l.progress,sx:{flex:1,height:4,borderRadius:2}}),e.jsxs(s,{variant:"caption",children:[l.progress,"%"]})]}),e.jsx(a,{sx:{display:"flex",gap:.5,mt:.5},children:e.jsx(H,{label:l.status==="planned"?"予定":l.status==="in_progress"?"進行中":l.status==="completed"?"完了":l.status,size:"small",color:l.status==="completed"?"success":l.status==="in_progress"?"primary":"default",sx:{fontSize:"0.7rem",height:20}})})]})}),e.jsx(Yt,{children:e.jsx($,{size:"small",onClick:()=>{me(l),i(!0)},children:e.jsx(dt,{fontSize:"small"})})})]})},l.id))})]})});return e.jsxs(a,{sx:{pb:8},children:[e.jsxs(a,{sx:{p:2,bgcolor:"primary.main",color:"white",mb:2},children:[e.jsxs(s,{variant:"h6",fontWeight:"bold",sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(X,{}),"工程管理"]}),e.jsx(s,{variant:"body2",sx:{opacity:.9},children:"造園工事の工程表作成・進捗管理"})]}),oe&&e.jsx(Pe,{severity:"error",sx:{mx:2,mb:2},children:oe}),z&&e.jsxs(a,{sx:{p:2},children:[e.jsx(xe,{}),e.jsx(s,{sx:{mt:1,textAlign:"center"},children:"読み込み中..."})]}),e.jsxs(a,{sx:{px:2},children:[e.jsx(De,{}),g&&e.jsx(J,{}),g&&ge.length>0&&e.jsx(jt,{}),!g&&e.jsxs(B,{sx:{p:3,textAlign:"center"},children:[e.jsx(X,{sx:{fontSize:64,color:"action.disabled",mb:2}}),e.jsx(s,{variant:"h6",gutterBottom:!0,children:"工程表を作成しましょう"}),e.jsx(s,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:"案件を選択してテンプレートから工程表を自動生成できます"})]})]}),g&&e.jsx(Bt,{color:"primary",sx:{position:"fixed",bottom:80,right:16,bgcolor:"#4CAF50","&:hover":{bgcolor:"#388E3C"}},onClick:()=>{me(null),i(!0)},children:e.jsx(ot,{})}),e.jsxs(mt,{value:pe,onChange:(l,f)=>q(f),sx:{position:"fixed",bottom:0,left:0,right:0,borderTop:1,borderColor:"divider"},children:[e.jsx(Z,{label:"一覧",icon:e.jsx(kt,{}),onClick:()=>D("list")}),e.jsx(Z,{label:"タイムライン",icon:e.jsx(X,{}),onClick:()=>D("timeline")}),e.jsx(Z,{label:"保存",icon:e.jsx(ct,{}),onClick:()=>{console.log("保存:",g)}})]}),e.jsxs(ht,{open:k,onClose:()=>i(!1),fullScreen:n,maxWidth:"sm",fullWidth:!0,children:[e.jsx(xt,{children:Se?"工程編集":"工程追加"}),e.jsx(ut,{children:e.jsxs(a,{sx:{pt:2},children:[e.jsx(F,{fullWidth:!0,label:"工程名",variant:"outlined",size:"small",sx:{mb:2}}),e.jsx(F,{fullWidth:!0,label:"説明",multiline:!0,rows:3,variant:"outlined",size:"small",sx:{mb:2}}),e.jsxs(u,{container:!0,spacing:2,children:[e.jsx(u,{item:!0,xs:6,children:e.jsx(F,{fullWidth:!0,label:"開始日",type:"date",size:"small",InputLabelProps:{shrink:!0}})}),e.jsx(u,{item:!0,xs:6,children:e.jsx(F,{fullWidth:!0,label:"期間（日）",type:"number",size:"small"})})]})]})}),e.jsxs(zt,{children:[e.jsx(R,{onClick:()=>i(!1),children:"キャンセル"}),e.jsx(R,{variant:"contained",sx:{bgcolor:"#4CAF50","&:hover":{bgcolor:"#388E3C"}},children:"保存"})]})]})]})},nt=Vt({palette:{primary:{main:"#4CAF50",light:"#81C784",dark:"#2E7D32",contrastText:"#ffffff"},secondary:{main:"#8BC34A",light:"#AED581",dark:"#689F38",contrastText:"#ffffff"},success:{main:"#4CAF50",light:"#81C784",dark:"#2E7D32"},warning:{main:"#FF9800",light:"#FFB74D",dark:"#F57C00"},error:{main:"#F44336",light:"#EF5350",dark:"#C62828"},background:{default:"#F1F8E9",paper:"#FFFFFF"},text:{primary:"#1B5E20",secondary:"#2E7D32"}},typography:{fontFamily:'"Noto Sans JP", "Roboto", "Helvetica", "Arial", sans-serif',h1:{fontWeight:700,color:"#1B5E20"},h2:{fontWeight:600,color:"#1B5E20"},h3:{fontWeight:600,color:"#1B5E20"},h4:{fontWeight:500,color:"#2E7D32"},h5:{fontWeight:500,color:"#2E7D32"},h6:{fontWeight:500,color:"#2E7D32"}},components:{MuiCard:{styleOverrides:{root:{borderRadius:12,boxShadow:"0 4px 12px rgba(46, 125, 50, 0.1)"}}},MuiButton:{styleOverrides:{root:{borderRadius:8,textTransform:"none",fontWeight:500},contained:{boxShadow:"0 4px 12px rgba(76, 175, 80, 0.3)","&:hover":{boxShadow:"0 6px 16px rgba(76, 175, 80, 0.4)"}}}},MuiPaper:{styleOverrides:{root:{borderRadius:12}}}}}),rr=()=>{const[c,p]=h.useState({currentView:"main-menu",user:{name:"山田太郎",role:"代表取締役",company:"緑風造園株式会社"},notifications:3}),[j,t]=h.useState(null),[n,r]=h.useState(!1),[d,x]=h.useState(""),o=(w,E)=>{p(ae=>({...ae,currentView:w})),x(`${M(w)}を開きました`),r(!0)},v=()=>{p(w=>({...w,currentView:"main-menu"}))},g=w=>{t(w.currentTarget)},A=()=>{t(null)},M=w=>({estimate:"見積書作成","price-master":"単価マスター","project-history":"案件履歴",settings:"設定","process-management":"工程管理"})[w]||"メニュー",S=ie(nt.breakpoints.down("md"));ie("(max-width:375px)");const[W,D]=h.useState(!1),[P,U]=h.useState(0),C=()=>{switch(c.currentView){case"main-menu":return e.jsx(Ue,{onMenuSelect:o,currentUser:c.user});case"process-management":return S?e.jsx(nr,{onScheduleCreated:w=>{x("工程表が作成されました"),r(!0)},onScheduleUpdated:w=>{x("工程表が更新されました"),r(!0)}}):e.jsx(Zn,{onScheduleCreated:w=>{x("工程表が作成されました"),r(!0)},onScheduleUpdated:w=>{x("工程表が更新されました"),r(!0)}});case"estimate":return e.jsxs(a,{sx:{p:3,textAlign:"center"},children:[e.jsx(s,{variant:"h4",gutterBottom:!0,children:"見積書作成ウィザード"}),e.jsx(s,{variant:"body1",color:"text.secondary",children:"Worker1で実装中の見積書作成ウィザードがここに表示されます"}),e.jsx(R,{variant:"contained",onClick:()=>window.open("/wizard","_blank"),sx:{mt:2},children:"見積ウィザードを開く"})]});case"price-master":return e.jsxs(a,{sx:{p:3,textAlign:"center"},children:[e.jsx(s,{variant:"h4",gutterBottom:!0,children:"単価マスター管理"}),e.jsx(s,{variant:"body1",color:"text.secondary",children:"Worker5で実装中の単価マスター機能がここに表示されます"})]});case"project-history":return e.jsxs(a,{sx:{p:3,textAlign:"center"},children:[e.jsx(s,{variant:"h4",gutterBottom:!0,children:"案件履歴管理"}),e.jsx(s,{variant:"body1",color:"text.secondary",children:"Worker3で実装中の案件履歴機能がここに表示されます"})]});case"settings":return e.jsxs(a,{sx:{p:3,textAlign:"center"},children:[e.jsx(s,{variant:"h4",gutterBottom:!0,children:"設定・事業者情報管理"}),e.jsx(s,{variant:"body1",color:"text.secondary",children:"Worker4で実装中の設定機能がここに表示されます"})]});default:return e.jsx(Ue,{onMenuSelect:o,currentUser:c.user})}};return e.jsxs(Gt,{theme:nt,children:[e.jsx(Ut,{}),e.jsxs(a,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[e.jsx(qt,{position:"static",elevation:2,children:e.jsxs(Jt,{children:[S&&e.jsx($,{color:"inherit",onClick:()=>D(!0),sx:{mr:1},children:e.jsx($e,{})}),e.jsx(ue,{sx:{mr:2,fontSize:S?24:32}}),e.jsx(s,{variant:S?"body1":"h6",component:"div",sx:{flexGrow:1,fontWeight:"bold",fontSize:S?"1rem":void 0},children:S?"Garden":"Garden 造園業務管理システム"}),!S&&e.jsxs(e.Fragment,{children:[c.currentView!=="main-menu"&&e.jsx(se,{title:"ホームに戻る",children:e.jsx($,{color:"inherit",onClick:v,sx:{mr:1},children:e.jsx(Ce,{})})}),e.jsx(se,{title:"通知",children:e.jsx($,{color:"inherit",sx:{mr:1},children:e.jsx(st,{badgeContent:c.notifications,color:"error",children:e.jsx(Qt,{})})})}),e.jsx(se,{title:"ユーザーメニュー",children:e.jsx($,{color:"inherit",onClick:g,sx:{ml:1},children:e.jsx(fe,{sx:{width:32,height:32,bgcolor:"secondary.main",fontSize:"0.9rem"},children:c.user.name.charAt(0)})})})]}),S&&e.jsx(fe,{sx:{width:28,height:28,bgcolor:"secondary.main",fontSize:"0.8rem"},children:c.user.name.charAt(0)}),e.jsxs(Kt,{anchorEl:j,open:!!j,onClose:A,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsxs(b,{onClick:A,children:[e.jsx(Ye,{sx:{mr:1}}),"プロフィール"]}),e.jsxs(b,{onClick:A,children:[e.jsx(Ve,{sx:{mr:1}}),"ログアウト"]})]})]})}),!S&&c.currentView!=="main-menu"&&e.jsx(a,{sx:{bgcolor:"background.paper",borderBottom:1,borderColor:"divider",px:3,py:1},children:e.jsx(s,{variant:"h6",color:"primary.main",children:M(c.currentView)})}),e.jsx(a,{sx:{flex:1,bgcolor:"background.default",pb:S?7:0},children:C()}),e.jsxs(Xt,{anchor:"left",open:W,onClose:()=>D(!1),PaperProps:{sx:{width:280}},children:[e.jsxs(a,{sx:{p:2},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(fe,{sx:{width:40,height:40,bgcolor:"primary.main"},children:c.user.name.charAt(0)}),e.jsxs(a,{children:[e.jsx(s,{variant:"body1",fontWeight:"bold",children:c.user.name}),e.jsx(s,{variant:"caption",color:"textSecondary",children:c.user.role})]})]}),e.jsx(Zt,{sx:{mb:2}})]}),e.jsxs(pt,{children:[e.jsxs(te,{button:!0,onClick:()=>{v(),D(!1)},children:[e.jsx(de,{children:e.jsx(Ce,{})}),e.jsx(ne,{primary:"ホーム"})]}),e.jsxs(te,{button:!0,onClick:()=>{o("estimate"),D(!1)},children:[e.jsx(de,{children:e.jsx(ue,{})}),e.jsx(ne,{primary:"見積書作成"})]}),e.jsxs(te,{button:!0,onClick:()=>{o("process-management"),D(!1)},children:[e.jsx(de,{children:e.jsx(TimelineIcon,{})}),e.jsx(ne,{primary:"工程管理"})]}),e.jsxs(te,{button:!0,onClick:()=>{o("price-master"),D(!1)},children:[e.jsx(de,{children:e.jsx(Ye,{})}),e.jsx(ne,{primary:"単価マスター"})]}),e.jsxs(te,{button:!0,onClick:()=>{o("settings"),D(!1)},children:[e.jsx(de,{children:e.jsx(Ve,{})}),e.jsx(ne,{primary:"設定"})]})]})]}),e.jsx(a,{component:"footer",sx:{bgcolor:"primary.dark",color:"white",py:2,px:3,textAlign:"center"},children:e.jsxs(s,{variant:"body2",children:["© 2025 ",c.user.company," - Garden 造園業務管理システム"]})}),S&&e.jsxs(mt,{value:P,onChange:(w,E)=>{switch(U(E),E){case 0:v();break;case 1:o("estimate");break;case 2:o("process-management");break;case 3:D(!0);break}},sx:{position:"fixed",bottom:0,left:0,right:0,borderTop:1,borderColor:"divider",bgcolor:"background.paper"},children:[e.jsx(Z,{label:"ホーム",icon:e.jsx(Ce,{})}),e.jsx(Z,{label:"見積",icon:e.jsx(CalendarIcon,{})}),e.jsx(Z,{label:"工程",icon:e.jsx(TimelineIcon,{})}),e.jsx(Z,{label:"メニュー",icon:e.jsx($e,{})})]}),e.jsx(en,{open:n,autoHideDuration:3e3,onClose:()=>r(!1),anchorOrigin:{vertical:S?"top":"bottom",horizontal:S?"center":"right"},sx:{mt:S?8:0,mb:S?8:0},children:e.jsx(Pe,{onClose:()=>r(!1),severity:"success",sx:{width:"100%"},children:d})})]})]})};class sr extends Oe.Component{constructor(p){super(p),this.state={hasError:!1}}static getDerivedStateFromError(p){return{hasError:!0,error:p}}componentDidCatch(p,j){console.error("Garden System Error:",p,j)}render(){return this.state.hasError?e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",padding:"20px",backgroundColor:"#F1F8E9",color:"#2E7D32",fontFamily:'"Noto Sans JP", sans-serif'},children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"20px"},children:"🌳"}),e.jsx("h2",{children:"Garden システムエラー"}),e.jsx("p",{children:"申し訳ございませんが、システムエラーが発生しました。"}),e.jsx("p",{style:{fontSize:"0.9rem",color:"#666",marginTop:"20px"},children:"ブラウザを再読み込みして再試行してください。"}),e.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"20px",padding:"10px 20px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem"},children:"再読み込み"})]}):this.props.children}}const ir=Le.createRoot(document.getElementById("root"));ir.render(e.jsx(Oe.StrictMode,{children:e.jsx(sr,{children:e.jsx(rr,{})})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(c=>{console.log("SW registered: ",c)}).catch(c=>{console.log("SW registration failed: ",c)})});
//# sourceMappingURL=index-DVuXatOc.js.map
